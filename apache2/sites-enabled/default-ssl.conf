<VirtualHost *:443>
    	ServerName www.giornalisti_cn.it
	ServerAlias giornalisti_cn.it

	DocumentRoot /var/www/html/giornalisti

    	SSLEngine on
    	SSLProtocol TLSv1.2
    	
	SSLCertificateFile /etc/apache2/myconf/server/server.crt
    	SSLCertificateKeyFile /etc/apache2/myconf/server/server.key
    	
	SSLCertificateChainFile /etc/apache2/myconf/chain.crt
    	SSLCACertificateFile /etc/apache2/myconf/rootCA/rootCA.crt

    	SSLVerifyClient require
    	SSLVerifyDepth 2
    	SSLOptions +OptRenegotiate

    	<Directory /var/www/html/giornalisti>
   		SSLRequire ( %{SSL_CLIENT_S_DN_CN} in {"Davide", "Mario", "Gabriele"} \
             			 and %{SSL_CLIENT_S_DN_OU} eq "IT Department" ) \
           		or \
			   ( %{SSL_CLIENT_S_DN_CN} eq "Christian" \
              			 and %{SSL_CLIENT_S_DN_OU} eq "HR Department" )
		SSLOptions +StdEnvVars +ExportCertData
	</Directory>


    	ErrorLog ${APACHE_LOG_DIR}/error.log
    	CustomLog ${APACHE_LOG_DIR}/access.log combined
</VirtualHost>
